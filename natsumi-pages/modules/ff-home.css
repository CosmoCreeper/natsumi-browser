/*

Natsumi Browser - A userchrome for Zen Browser that makes things flow.

Copyright (c) 2024-present Green (@greeeen-dev)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

Natsumi Browser uses code from others. The link to the original projects or
their author(s) have been provided above the used code.

*/

/* ==== Firefox Home tweaks ==== */

@keyframes modal-overlay-fadein {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes modal-fadein {
  0% {
    opacity: 0;
    margin-top: 10px;
  }

  100% {
    opacity: 1;
    margin-top: 0;
  }
}

@media not (-moz-bool-pref: "natsumi.home.disabled") {
  @-moz-document url-prefix(about:home), url-prefix(about:newtab), url-prefix(about:privatebrowsing) {
    :root {
      --natsumi-colors-border: color-mix(in srgb, var(--natsumi-colors-secondary) 80%, black 20%);
      --toolbarbutton-active-background: rgba(255, 255, 255, 0.9);
      --toolbarbutton-hover-background: color-mix(in srgb, #202020 10%, transparent);
      --newtab-weather-background-color: transparent !important;

      @media (prefers-color-scheme: dark) {
        --toolbarbutton-active-background: color-mix(in srgb, var(--natsumi-primary-color) 50%, rgba(255, 255, 255, .1));
        --toolbarbutton-hover-background: color-mix(in srgb, #ebebeb 10%, transparent);
      }
    }

    @media (-moz-bool-pref: "natsumi.home.custom-background") {
      body {
        background-image: var(--natsumi-home-bg) !important;
      }
    }
    
    @media not (-moz-bool-pref: "natsumi.theme.no-april-fools") {
      * {
        font-family: 'Comic Sans MS', 'Comic Sans', system-ui !important;
      }
      
      .logo {
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAORlWElmTU0AKgAAAAgABgESAAMAAAABAAEAAAEaAAUAAAABAAAAVgEbAAUAAAABAAAAXgExAAIAAABOAAAAZgE7AAIAAAAGAAAAtIdpAAQAAAABAAAAugAAAAAAAABgAAAAAQAAAGAAAAABQ2FudmEgKFJlbmRlcmVyKSBkb2M9REFHalUyc2Y2QjAgdXNlcj1VQUN1MDdsVU1kbyBicmFuZD1CQUN1MF84OGx3WSB0ZW1wbGF0ZT0AR3JlZW4AAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAECgAwAEAAAAAQAAAEAAAAAAHU9qtAAAAAlwSFlzAAAOxAAADsQBlSsOGwAABaZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6QXR0cmliPSJodHRwOi8vbnMuYXR0cmlidXRpb24uY29tL2Fkcy8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj45NjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+OTY8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDxkYzpjcmVhdG9yPgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaT5HcmVlbjwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwvZGM6Y3JlYXRvcj4KICAgICAgICAgPGRjOnRpdGxlPgogICAgICAgICAgICA8cmRmOkFsdD4KICAgICAgICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5ub3Qgc28gemVuIC0gMTwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpBbHQ+CiAgICAgICAgIDwvZGM6dGl0bGU+CiAgICAgICAgIDxBdHRyaWI6QWRzPgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICAgICAgICAgICAgICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI1LTAzLTMxPC9BdHRyaWI6Q3JlYXRlZD4KICAgICAgICAgICAgICAgICAgPEF0dHJpYjpFeHRJZD5mY2ZiZmFmMi03MTg4LTQ2MDMtODE2Mi0wNGM4OTM0OTVkYWE8L0F0dHJpYjpFeHRJZD4KICAgICAgICAgICAgICAgICAgPEF0dHJpYjpGYklkPjUyNTI2NTkxNDE3OTU4MDwvQXR0cmliOkZiSWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwvQXR0cmliOkFkcz4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5DYW52YSAoUmVuZGVyZXIpIGRvYz1EQUdqVTJzZjZCMCB1c2VyPVVBQ3UwN2xVTWRvIGJyYW5kPUJBQ3UwXzg4bHdZIHRlbXBsYXRlPTwveG1wOkNyZWF0b3JUb29sPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KgnJ3EQAAFH9JREFUeAHtmgl0luWVx292YlYgCIQ1EDbBhUUBETdo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') !important;
      }

      .promo {
        display: none !important;
      }
    }

    .customize-menu {
      height: calc(100% - 20px) !important;
      top: 10px !important;
      right: 0 !important;
      border-radius: 10px;
      overflow: hidden;
      background-color: var(--natsumi-mat-hz-background) !important;
      backdrop-filter: none !important;
      border: 1px solid rgba(20, 20, 20, 0.2) !important;
      opacity: 0 !important;
      transform: none !important;
      transition: opacity 0.2s ease, right 0.2s ease, backdrop-filter 0.2s ease !important;
      visibility: visible !important;
      animation: none !important;
      pointer-events: none !important;
      box-shadow: 0 0 var(--natsumi-mat-hz-shadow-size) var(--natsumi-mat-hz-shadow-color) !important;

      @media (prefers-color-scheme: dark) {
        border-color: rgba(235, 235, 235, 0.3) !important;
      }

      .close-button-wrapper {
        background: transparent !important;
      }

      .divider {
        border-color: rgba(20, 20, 20, 0.2) !important;

        @media (prefers-color-scheme: dark) {
          border-color: rgba(235, 235, 235, 0.3) !important;
        }
      }

      h2 {
        font-size: 18px !important;
        font-weight: 500 !important;
      }

      &.customize-animate-enter, &.customize-animate-enter-done {
        right: 10px !important;
        opacity: 1 !important;
        backdrop-filter: saturate(var(--natsumi-mat-hz-saturation)) contrast(var(--natsumi-mat-hz-contrast)) blur(var(--natsumi-mat-hz-blur-radius)) !important;
        pointer-events: all !important;
      }

      .wallpaper-list {
        background: transparent !important;
      }

      .close-button, .category-header, .category-list, #shortcuts-section, #recent-section, #weather-section, .divider, #settings-link {
        transition: background 0.2s ease, opacity 0.2s ease !important;
      }

      &:has(.wallpaper-list-enter), &:has(.wallpaper-list-enter-done) {
        .close-button, .category-header, .category-list, #shortcuts-section, #recent-section, #weather-section, .divider, #settings-link {
          opacity: 0 !important;
          pointer-events: none !important;
        }
      }

      .close-button {
        color: transparent !important;
        width: 32px !important;
        height: 32px !important;
        padding: 0 !important;
        border: none !important;
        background-position: center;
        position: relative !important;

        &::before {
          content: "";
          position: absolute;
          width: 16px;
          height: 16px;
          left: 50%;
          transform: translateX(-50%) !important;
          background-image: url('chrome://browser/skin/zen-icons/close.svg') !important;
          background-repeat: no-repeat;
          background-position: center !important;
          -moz-context-properties: fill;
          fill: black;

          @media (prefers-color-scheme: dark) {
            fill: white;
          }
        }

        &:hover {
          background-color: var(--toolbarbutton-hover-background) !important;
        }
      }
    }

    .toggle-button[aria-pressed="true"] {
      background-color: var(--natsumi-primary-color) !important;

      &:hover {
        background-color: color-mix(in srgb, var(--natsumi-primary-color) 15%, #ebebeb) !important;

        @media (prefers-color-scheme: dark) {
          background-color: color-mix(in srgb, var(--natsumi-primary-color) 15%, #202020) !important;
        }
      }
    }

    #moz-toggle-label {
      font-size: 18px !important;
      font-weight: 500 !important;
    }

    .weather.active {
      .weatherCard {
        background-color: var(--natsumi-mat-hz-background) !important;
        backdrop-filter: saturate(var(--natsumi-mat-hz-saturation)) contrast(var(--natsumi-mat-hz-contrast)) blur(var(--natsumi-mat-hz-blur-radius)) !important;
        border: 1px solid rgba(20, 20, 20, 0.2) !important;
        box-shadow: 0 0 var(--natsumi-mat-hz-shadow-size) var(--natsumi-mat-hz-shadow-color) !important;

        @media (prefers-color-scheme: dark) {
          border-color: rgba(235, 235, 235, 0.3) !important;
        }

        .weatherButtonContextMenuWrapper::after {
          background-color: rgba(20, 20, 20, 0.2) !important;

          @media (prefers-color-scheme: dark) {
            background-color: rgba(235, 235, 235, 0.3) !important;
          }
        }

        .weatherInfoLink, .weatherButtonContextMenuWrapper {
          transition: background 0.2s ease;

          &:hover {
            background-color: var(--toolbarbutton-hover-background) !important;
          }

          &:has(.context-menu), &:active {
            background-color: var(--toolbarbutton-active-background) !important;
          }
        }
      }

      .weatherNotAvailable {
        background-color: color-mix(in srgb, rgb(255, 146, 146) 75%, transparent) !important;
        backdrop-filter: blur(10px) !important;
        border: 1px solid rgba(20, 20, 20, 0.2) !important;
        box-shadow: 0 0 10px color-mix(in srgb, rgb(255, 146, 146) 75%, black) !important;

        @media (prefers-color-scheme: dark) {
          background-color: color-mix(in srgb, rgb(255, 100, 100) 75%, transparent) !important;
          border-color: rgba(235, 235, 235, 0.3) !important;
          box-shadow: 0 0 10px color-mix(in srgb, rgb(255, 100, 100) 75%, white) !important;
        }
      }
    }

    .personalize-button {
      transition: background 0.2s ease;
      border-radius: 6px !important;
    }

    .lightWallpaper .personalize-button {
      color-scheme: light !important;
      --hover-bg: color-mix(in srgb, #202020 10%, transparent);
    }

    .darkWallpaper .personalize-button {
      color-scheme: dark !important;
      --hover-bg: color-mix(in srgb, #ebebeb 10%, transparent);
    }

    .personalize-button:hover {
      background-color: var(--hover-bg) !important;
    }

    .top-site-button {
      border-radius: 10px !important;

      .tile, .top-site-icon{
        transition: background 0.2s ease;
      }

      &:hover {
        padding: 19px 16px 3px !important;
        background-color: var(--natsumi-mat-hz-background) !important;
        box-shadow: 0 0 var(--natsumi-mat-hz-shadow-size) var(--natsumi-mat-hz-shadow-color) !important;
        backdrop-filter: saturate(var(--natsumi-mat-hz-saturation)) contrast(var(--natsumi-mat-hz-contrast)) blur(var(--natsumi-mat-hz-blur-radius)) !important;
        border: 1px solid rgba(20, 20, 20, 0.2) !important;

        @media (prefers-color-scheme: dark) {
          border-color: rgba(235, 235, 235, 0.3) !important;
        }

        .tile, .top-site-icon {
          background-color: var(--natsumi-primary-color) !important;
        }
      }

      .title span {
        transition: color 0.2s ease;
      }
    }

    .search-handoff-button {
      border-radius: 50px !important;
      background-color: var(--natsumi-mat-hz-background) !important;
      box-shadow: 0 0 var(--natsumi-mat-hz-shadow-size) var(--natsumi-mat-hz-shadow-color) !important;
      backdrop-filter: saturate(var(--natsumi-mat-hz-saturation)) contrast(var(--natsumi-mat-hz-contrast)) blur(var(--natsumi-mat-hz-blur-radius)) !important;
      border: 1px solid rgba(20, 20, 20, 0.2) !important;

      @media (prefers-color-scheme: dark) {
        border-color: rgba(235, 235, 235, 0.3) !important;
      }
    }

    /* Modals */

    .modal-overlay, .modalOverlayOuter.active {
      animation: modal-overlay-fadein 0.3s ease !important;
      background-color: rgba(28, 27, 34, 0.45) !important;
    }

    /*noinspection CssInvalidFunction*/
    .modal {
      animation: modal-fadein 0.3s ease !important;
      border-radius: 8px !important;
      backdrop-filter: blur(var(--natsumi-mat-ga-blur-radius)) !important;
      background: var(--natsumi-mat-ga-background) !important;
      box-shadow: 0 0 var(--natsumi-mat-ga-shadow-size) var(--natsumi-mat-ga-shadow-color) !important;
      border: 1px solid light-dark(rgba(20, 20, 20, 0.2), rgba(235, 235, 235, 0.3)) !important;

      .modal-message {
        display: block !important;

        .icon {
          width: 100% !important;
          margin-right: 0 !important;
          margin-bottom: 20px !important;
        }

        .icon-modal-delete {
          background-image: url('chrome://browser/skin/zen-icons/edit-delete.svg') !important;
          color: white !important;
        }

        span p[data-l10n-id^="newtab-confirm-delete-history"] {
          text-align: center !important;
          color: white !important;

          &:last-child {
            font-weight: bold !important;
          }
        }
      }

      .top-site-button .title span {
        color: black !important;

        @media (prefers-color-scheme: dark) {
          color: white !important;
        }
      }

      /*noinspection CssInvalidFunction*/
      .actions {
        border-color: light-dark(rgba(20, 20, 20, 0.2), rgba(235, 235, 235, 0.3)) !important;

        /*noinspection CssInvalidFunction*/
        button {
          border: 1px solid light-dark(rgba(20, 20, 20, 0.2), rgba(235, 235, 235, 0.3)) !important;
          box-shadow: none !important;
          padding: 10px !important;
          border-radius: 50px !important;
          appearance: none !important;
          color: light-dark(black, white) !important;
          transition: background-color 0.2s ease !important;

          &:hover {
            background-color: var(--toolbarbutton-hover-background) !important;
          }

          &.done {
            background-color: color-mix(in srgb, var(--natsumi-primary-color) 50%, transparent) !important;
          }
        }
      }

      /*noinspection CssInvalidFunction*/
      &:has(p[data-l10n-id^="newtab-confirm-delete-history"]) {
        border: 1px solid rgba(235, 235, 235, 0.3) !important;
        background: color-mix(in srgb, rgb(255, 100, 100) 75%, transparent) !important;
        box-shadow: 0 0 10px color-mix(in srgb, rgb(255, 100, 100) 75%, light-dark(black, white)) !important;

        .actions {
          button {
            color: white !important;
            border-color: rgba(235, 235, 235, 0.3) !important;

            &.done {
              background-color: rgba(255, 255, 255, 0.3) !important;
            }
          }
        }
      }
    }

    /* Context menu */

    .context-menu {
      background-color: var(--natsumi-mat-hz-background) !important;
      box-shadow: 0 0 var(--natsumi-mat-hz-shadow-size) var(--natsumi-mat-hz-shadow-color) !important;
      backdrop-filter: saturate(var(--natsumi-mat-hz-saturation)) contrast(var(--natsumi-mat-hz-contrast)) blur(var(--natsumi-mat-hz-blur-radius)) !important;
      border: 1px solid rgba(20, 20, 20, 0.2) !important;

      @media (prefers-color-scheme: dark) {
        border-color: rgba(235, 235, 235, 0.3) !important;
      }

      .context-menu-list {
        padding-left: 6px !important;
        padding-right: 6px !important;

        .context-menu-item {
          button {
            padding-left: 6px !important;
            padding-right: 6px !important;
            border-radius: 6px !important;
            transition: background-color 0.2s ease !important;

            &:hover {
              background-color: var(--toolbarbutton-hover-background) !important;
            }

            &:active {
              background-color: var(--toolbarbutton-active-background) !important;
            }
          }
        }

        /*noinspection CssInvalidFunction*/
        .separator {
          width: 95% !important;
          margin-left: auto !important;
          margin-right: auto !important;
          border-color: light-dark(rgba(20, 20, 20, 0.2), rgba(235, 235, 235, 0.3)) !important;
        }
      }
    }
  }

  /* PB patches */
  @-moz-document url-prefix(about:privatebrowsing) {
    body, #search-handoff-button {
      --natsumi-colors-primary: color-mix(in srgb, var(--natsumi-primary-color) 20%, #202020 80%);
      --natsumi-colors-secondary: color-mix(in srgb, var(--natsumi-primary-color) 30%, #202020 70%);
      --natsumi-colors-tertiary: color-mix(in srgb, var(--natsumi-primary-color) 1%, #202020 99%);
      --natsumi-colors-primary-foreground: color-mix(in srgb, var(--natsumi-primary-color) 80%, white 20%);

      @media (-moz-bool-pref: 'zen.theme.color-prefs.colorful') {
        --natsumi-colors-primary: color-mix(in srgb, var(--natsumi-primary-color) 50%, black 50%);
        --natsumi-colors-secondary: color-mix(in srgb, var(--natsumi-primary-color) 40%, black 60%);
        --natsumi-colors-tertiary: color-mix(in srgb, var(--natsumi-primary-color) 15%, black 85%);
        --natsumi-colors-primary-foreground: color-mix(in srgb, var(--natsumi-primary-color) 80%, white 20%);
      }
    }

    body {
      background-color: color-mix(in srgb, var(--natsumi-colors-tertiary) 70%, #0f0f0f 30%) !important;
    }

    .fake-textbox {
      color: white !important;
    }

    .fake-caret {
      background-color: white !important;
    }
  }
}
